---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { SITE_TITLE } from "../consts";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title={`Galería - ${SITE_TITLE}`}
      description="Galería de imágenes de nuestros productos y procesos artesanales"
    />
  </head>
  <body>
    <Header />
    <main>
      <section class="gallery-section">
        <h1>Nuestra Galería</h1>
        <p class="gallery-description">
          Descubre la belleza de nuestros productos y procesos artesanales a
          través de estas imágenes.
        </p>

        <div class="masonry-gallery">
          <div class="gallery-item">
            <img
              src="/gallery/img1.jpg"
              alt="Imagen de galería 1"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img2.jpg"
              alt="Imagen de galería 2"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img3.jpg"
              alt="Imagen de galería 3"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img4.jpg"
              alt="Imagen de galería 4"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img5.jpg"
              alt="Imagen de galería 5"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img6.jpg"
              alt="Imagen de galería 6"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img7.jpg"
              alt="Imagen de galería 7"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img8.jpg"
              alt="Imagen de galería 8"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img9.jpg"
              alt="Imagen de galería 9"
              loading="lazy"
            />
          </div>
          <div class="gallery-item">
            <img
              src="/gallery/img10.jpg"
              alt="Imagen de galería 10"
              loading="lazy"
            />
          </div>
        </div>
      </section>

      <!-- Lightbox Modal -->
      <div id="lightbox" class="lightbox-modal">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img" />
        <div id="lightbox-caption"></div>
      </div>
    </main>

    <Footer />

    <style>
      main {
        flex-direction: column;
        justify-content: center;
        align-items: center; /* centra horizontalmente */
        width: 100%;
        padding: 20px auto;
        font-family: "Atkinson", sans-serif;
      }

      .gallery-section {
        padding: 1px 20px 20px 20px;
        margin: 0 auto;
        max-width: 1400px;
        text-align: center;
      }

      .gallery-section h1 {
        font-size: 3rem;
        color: #2c3e50;
        margin-bottom: 20px;
        position: relative;
      }

      .gallery-section h1::after {
        content: "";
        display: block;
        width: 100px;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--primary-green),
          var(--primary-gold)
        );
        margin: 15px auto;
      }

      .gallery-description {
        font-size: 1.2rem;
        color: var(--text-dark);
        margin-bottom: 40px;
        opacity: 0.8;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
      }

      .masonry-gallery {
        column-count: 4;
        column-gap: 20px;
        padding: 20px 0;
      }

      .gallery-item {
        break-inside: avoid;
        margin-bottom: 20px;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: var(--premium-shadow);
        transition: var(--transition-smooth);
        cursor: pointer;
      }

      .gallery-item:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 20px 40px rgba(46, 139, 87, 0.2);
      }

      .gallery-item img {
        width: 100%;
        height: auto;
        display: block;
        border-radius: 15px;
        transition: var(--transition-smooth);
      }

      .gallery-item:hover img {
        filter: brightness(1.1);
      }

      /* Lightbox Styles */
      .lightbox-modal {
        display: none;
        position: fixed;
        z-index: 10000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        animation: fadeIn 0.3s ease-out;
      }

      .lightbox-modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .lightbox-close {
        position: absolute;
        top: 20px;
        right: 30px;
        color: #fff;
        font-size: 40px;
        font-weight: bold;
        cursor: pointer;
        transition: var(--transition-smooth);
        z-index: 10001;
      }

      .lightbox-close:hover {
        color: var(--primary-gold);
        transform: scale(1.2);
      }

      .lightbox-content {
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
        border-radius: 10px;
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
      }

      #lightbox-caption {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: #fff;
        text-align: center;
        font-size: 1.1rem;
        background: rgba(0, 0, 0, 0.7);
        padding: 10px 20px;
        border-radius: 25px;
        backdrop-filter: blur(10px);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .masonry-gallery {
          column-count: 4;
          column-gap: 18px;
        }

        .gallery-section {
          padding: 50px 20px;
        }
      }

      @media (max-width: 1024px) {
        .masonry-gallery {
          column-count: 3;
          column-gap: 16px;
        }

        .gallery-section h1 {
          font-size: 2.8rem;
        }
      }

      @media (max-width: 900px) {
        .masonry-gallery {
          column-count: 3;
          column-gap: 15px;
        }

        .gallery-item {
          margin-bottom: 18px;
        }
      }

      @media (max-width: 768px) {
        .gallery-section {
          padding: 40px 15px;
        }

        .gallery-section h1 {
          font-size: 2.5rem;
        }

        .gallery-description {
          font-size: 1.1rem;
        }

        .masonry-gallery {
          column-count: 2;
          column-gap: 15px;
        }

        .gallery-item {
          margin-bottom: 15px;
        }
      }

      @media (max-width: 600px) {
        .masonry-gallery {
          column-count: 2;
          column-gap: 12px;
        }

        .gallery-item {
          margin-bottom: 12px;
        }

        .gallery-section h1 {
          font-size: 2.2rem;
        }
      }

      @media (max-width: 480px) {
        .gallery-section {
          padding: 30px 10px;
        }

        .gallery-section h1 {
          font-size: 2rem;
        }

        .gallery-description {
          font-size: 1rem;
          margin-bottom: 30px;
        }

        .masonry-gallery {
          column-count: 1;
          column-gap: 10px;
        }

        .gallery-item {
          margin-bottom: 10px;
        }

        .lightbox-close {
          top: 10px;
          right: 15px;
          font-size: 30px;
        }

        .lightbox-content {
          max-width: 95%;
          max-height: 80%;
        }

        #lightbox-caption {
          bottom: 10px;
          font-size: 1rem;
          padding: 8px 15px;
        }
      }

      @media (max-width: 360px) {
        .gallery-section {
          padding: 20px 8px;
        }

        .gallery-section h1 {
          font-size: 1.8rem;
        }

        .gallery-description {
          font-size: 0.95rem;
          margin-bottom: 25px;
        }

        .masonry-gallery {
          column-count: 1;
          column-gap: 8px;
        }

        .gallery-item {
          margin-bottom: 8px;
        }

        .lightbox-close {
          top: 8px;
          right: 12px;
          font-size: 25px;
        }

        .lightbox-content {
          max-width: 98%;
          max-height: 85%;
        }

        #lightbox-caption {
          bottom: 8px;
          font-size: 0.9rem;
          padding: 6px 12px;
        }
      }
    </style>

    <script>
      // Lightbox functionality
      const lightbox = document.getElementById("lightbox") as HTMLDivElement;
      const lightboxImg = document.getElementById(
        "lightbox-img"
      ) as HTMLImageElement;
      const lightboxCaption = document.getElementById(
        "lightbox-caption"
      ) as HTMLDivElement;
      const lightboxClose = document.querySelector(
        ".lightbox-close"
      ) as HTMLSpanElement;

      // Get all gallery items
      const galleryItems = document.querySelectorAll(
        ".gallery-item img"
      ) as NodeListOf<HTMLImageElement>;

      // Open lightbox when clicking on image
      galleryItems.forEach((img) => {
        img.addEventListener("click", () => {
          if (lightboxImg && lightboxCaption && lightbox) {
            lightboxImg.src = img.src;
            lightboxCaption.textContent = img.alt;
            lightbox.classList.add("show");
            document.body.style.overflow = "hidden"; // Prevent scrolling
          }
        });
      });

      // Close lightbox
      if (lightboxClose) {
        lightboxClose.addEventListener("click", () => {
          if (lightbox) {
            lightbox.classList.remove("show");
            document.body.style.overflow = "auto";
          }
        });
      }

      // Close lightbox when clicking outside the image
      if (lightbox) {
        lightbox.addEventListener("click", (e) => {
          if (e.target === lightbox) {
            lightbox.classList.remove("show");
            document.body.style.overflow = "auto";
          }
        });
      }

      // Close lightbox with ESC key
      document.addEventListener("keydown", (e) => {
        if (
          e.key === "Escape" &&
          lightbox &&
          lightbox.classList.contains("show")
        ) {
          lightbox.classList.remove("show");
          document.body.style.overflow = "auto";
        }
      });
    </script>
  </body>
</html>
